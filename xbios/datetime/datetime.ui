!iflang [english]


!begin_node Die Belegung des NVM der Echtzeit-Uhr
!label Non-Volatile-Memory, Belegung des

Die Echtzeit-Uhr im Atari-TT und Falcon030 verfÅgt Åber 50 Bytes
nichtflÅchtiges RAM, welches von Programmen zu Konfigurationszwecken
benutzt werden kann. Es gilt folgende Belegung:

!begin_verbatim
typedef struct
{
  unsigned int bootpref;
  char reserved[4];
  unsigned char language;
  unsigned char keyboard;
  unsigned char datetime;
  char separator;
  unsigned char bootdelay;
  char reserved2[3];
  unsigned int vmode;
  unsigned char scsi;
} NVM;
!end_verbatim

!begin_xlist [language ]
!item [bootpref]
BootprÑferenz: (!nl)
0x00 = keine PrÑferenz (!nl)
0x08 = MagiC (!nl)
0x10 = Linux (!nl)
0x20 = NetBSD (!nl)
0x40 = UNIX wird gebootet (!nl)
0x80 = TOS wird gebootet

!item [language]
Landessprache: (!nl)
0 = Englisch (!nl)
1 = Deutsch (!nl)
2 = Franzîsisch (!nl)
3 = reserviert (!nl)
4 = Spanisch (!nl)
5 = Italienisch

!item [keyboard]
Layout der Tastatur: (!nl)
0 =  USA  (!nl)
1 =  Deutschland  (!nl)
2 =  Frankreich  (!nl)
3 =  England  (!nl)
4 =  Spanien  (!nl)
5 =  Italien  (!nl)
6 =  Schweden  (!nl)
7 =  (franzîsische) Schweiz  (!nl)
8 =  (deutsche) Schweiz

!item [datetime]
Formatierung des Datum:
!begin_xlist [Bit 0..2] !short
!item [Bit 0..3]
0 = Format "MM-DD-YY"  (Monat, Tag, Jahr) (!nl)
1 = Format "DD-MM-YY"  (Tag, Monat, Jahr) (!nl)
2 = Format "YY-MM-DD"  (Jahr, Monat, Tag) (!nl)
3 = Format "YY-DD-MM"  (Jahr, Tag, Monat) (!nl)
!item [Bit 4..7]
0 = 12-Stunden Darstellung (!nl)
1 = 24-Stunden Darstellung
!end_xlist

!item [separator]
ASCII-Wert des Zeichens, das als Trenner fÅr die Datumsangaben
dienen soll.

!item [bootdelay]
Bootverzîgerung

!item [vmode] Videomode  (!nl)

!item [scsi]
!begin_xlist [Bit 0..2] !short
!item [Bit 0..2] SCSI-ID (0-7)
!item [Bit 3..6] 0, reserviert
!item [Bit 7]    Flag fÅr Bus-Arbitration. (!nl)
                 Es gilt: (!nl)
                 0 = (!nolink [Arbitration]) ein (!nl)
                 1 = (!nolink [Arbitration]) aus (!nl)

!end_xlist

!end_xlist

Alle weiteren Bytes sind z.Zt. nicht dokumentiert. Wie man sieht, lÑût sich
insbesondere die SCSI-ID von TT oder Falcon Åber das NVM festlegen.

!label NVM, im Milan
Beim Milan hat das NVM eine Grîûe von 224 Bytes.

Die folgende Struktur gilt nur fÅr TOS 4.08 (2003-03-09) and Bootblock 1.02!
!begin_verbatim
typedef struct
{
  unsigned int bootpref;
  char reserved[4];
  unsigned char language;
  unsigned char keyboard;
  unsigned char datetime;
  char separator;
  unsigned char bootdelay;
  unsigned char ide_drives;
  unsigned char scsi_drives;
  char reserved2;
  unsigned int vmode;
  unsigned char scsi;
  char reserved3[31];
  unsigned char memory;
  char INT1_2;
  char INT3_4;
  char reserved4[173];
} NVM_Milan;
!end_verbatim

!begin_xlist [memory ]
!item [memory]
!begin_xlist [Bit 0..2] !short
!item [Bit 0..1] 0 = 16MB ST-RAM (!nl)
                 1 = ~4MB ST-RAM (!nl)
                 2 = ~2MB ST-RAM
!item [Bit 2] ROMPORT-Emulation (!nl)
!end_xlist

!end_xlist

See Also:    NVMaccess ~ (!link [XHDI-Spezifikation][XHDI])

!end_node


!else


!begin_node Die Belegung des NVM der Echtzeit-Uhr
!label Non-Volatile-Memory, Belegung des

Die Echtzeit-Uhr im Atari-TT und Falcon030 verfÅgt Åber 50 Bytes
nichtflÅchtiges RAM, welches von Programmen zu Konfigurationszwecken
benutzt werden kann. Es gilt folgende Belegung:


!begin_verbatim
typedef struct
{
  unsigned int bootpref;
  char reserved[4];
  unsigned char language;
  unsigned char keyboard;
  unsigned char datetime;
  char separator;
  unsigned char bootdelay;
  char reserved2[3];
  unsigned int vmode;
  unsigned char scsi;
} NVM;
!end_verbatim

!begin_xlist [language ]
!item [bootpref]
BootprÑferenz: (!nl)
0x00 = keine PrÑferenz (!nl)
0x08 = MagiC (!nl)
0x10 = Linux (!nl)
0x20 = NetBSD (!nl)
0x40 = UNIX wird gebootet (!nl)
0x80 = TOS wird gebootet

!item [language]
Landessprache: (!nl)
0 = Englisch (!nl)
1 = Deutsch (!nl)
2 = Franzîsisch (!nl)
3 = reserviert (!nl)
4 = Spanisch (!nl)
5 = Italienisch

!item [keyboard]
Layout der Tastatur: (!nl)
0 =  USA  (!nl)
1 =  Deutschland  (!nl)
2 =  Frankreich  (!nl)
3 =  England  (!nl)
4 =  Spanien  (!nl)
5 =  Italien  (!nl)
6 =  Schweden  (!nl)
7 =  (franzîsische) Schweiz  (!nl)
8 =  (deutsche) Schweiz

!item [datetime]
Formatierung des Datum:
!begin_xlist [Bit 0..2] !short
!item [Bit 0..3]
0 = Format "MM-DD-YY"  (Monat, Tag, Jahr) (!nl)
1 = Format "DD-MM-YY"  (Tag, Monat, Jahr) (!nl)
2 = Format "YY-MM-DD"  (Jahr, Monat, Tag) (!nl)
3 = Format "YY-DD-MM"  (Jahr, Tag, Monat) (!nl)
!item [Bit 4..7]
0 = 12-Stunden Darstellung (!nl)
1 = 24-Stunden Darstellung
!end_xlist

!item [separator]
ASCII-Wert des Zeichens, das als Trenner fÅr die Datumsangaben
dienen soll.

!item [bootdelay]
Bootverzîgerung

!item [vmode] Videomode  (!nl)

!item [scsi]
!begin_xlist [Bit 0..2] !short
!item [Bit 0..2] SCSI-ID (0-7)
!item [Bit 3..6] 0, reserviert
!item [Bit 7]    Flag fÅr Bus-Arbitration. (!nl)
                 Es gilt: (!nl)
                 0 = (!nolink [Arbitration]) ein (!nl)
                 1 = (!nolink [Arbitration]) aus (!nl)

!end_xlist

!end_xlist

Alle weiteren Bytes sind z.Zt. nicht dokumentiert. Wie man sieht, lÑût sich
insbesondere die SCSI-ID von TT oder Falcon Åber das NVM festlegen.

!label NVM, im Milan
Beim Milan hat das NVM eine grîûe von 224 Bytes.

Die folgende Struktur gilt nur fÅr TOS 4.08 (2003-03-09) und Bootblock 1.02!
!begin_verbatim
typedef struct
{
  unsigned int bootpref;
  char reserved[4];
  unsigned char language;
  unsigned char keyboard;
  unsigned char datetime;
  char separator;
  unsigned char bootdelay;
  unsigned char ide_drives;
  unsigned char scsi_drives;
  char reserved2;
  unsigned int vmode;
  unsigned char scsi;
  char reserved3[31];
  unsigned char memory;
  char INT1_2;
  char INT3_4;
  char reserved4[173];
} NVM_Milan;
!end_verbatim

!begin_xlist [memory ]
!item [memory]
!begin_xlist [Bit 0..2] !short
!item [Bit 0..1] 0 = 16MB ST-RAM (!nl)
                 1 = ~4MB ST-RAM (!nl)
                 2 = ~2MB ST-RAM
!item [Bit 2] ROMPORT-Emulation (!nl)
!end_xlist

!end_xlist

Querverweis:    NVMaccess ~ (!link [XHDI-Spezifikation][XHDI])

!end_node


!endif