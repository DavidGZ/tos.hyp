!iflang [english]


!begin_node Floprate
(!begin_liste) [Availability]

!item [Name:]
ØFloppy rateÆ - liest oder setzt die seek rate eines Floppylaufwerks.

!item [Opcode:]
41

!item [Syntax:]
int16_t Floprate( int16_t devno, int16_t newrate );

!item [Description:]
Die XBIOS-Routine Floprate liefert bzw. setzt die aktuelle Seekrate. Es
gilt:
!begin_xlist [Parameter]
!item [Parameter]
Bedeutung
!item [devno]
Laufwerksnummer
!begin_table [l l l]
0 !! = !! Laufwerk-A
1 !! = !! Laufwerk-B usw.
!end_table
!item [newrate]
!begin_table [r l l]
-1 !! = !! Seekrate nicht verÑndern
0 !! = !! Rate von  6ms
1 !! = !! Rate von 12ms
2 !! = !! Rate von  2ms
3 !! = !! Rate von  3ms
!end_table
!end_xlist
!label Floppy, Timeout der
!label Timeout der Floppy

(!B)Hinweis:(!b) Die Funktion steht erst ab TOS 1.04 zur VerfÅgung. Ab
MagiC-3 kann darÅberhinaus per Floprate (-1, newrate) der (!B)Timeout(!b)
fÅr die Floppy eingestellt werden; ein Wert von 300 bedeutet 1,5 Sekunden
(dies ist der Wert, der beim Booten per Default eingestellt ist).

!item [(!nolink [Return]) Value:]
Die Funktion liefert die vorherige Seekrate als Ergebnis.

!item [Group:]
Laufwerksfunktionen

!item [Availability:]
Die Funktion steht erst ab TOS 1.04 zur VerfÅgung.

!item [See Also:]
(!link [Binding] [Bindings fÅr Floprate]) ~ Flopwr ~ Floprd ~ Flopver ~
Flopfmt

(!ende_liste)


!begin_node Bindings fÅr Floprate
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
 #include <tos.h>

int16_t Floprate( int16_t devno, int16_t newrate );
!item [Assembler:]
!begin_verbatim
move.w    newrate,-(sp) ; Offset 4
move.w    devno,-(sp)   ; Offset 2
move.w    #41,-(sp)     ; Offset 0
trap      #14           ; XBIOS aufrufen
addq.l    #6,sp         ; Stack korrigieren
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7xbi.htm">GFA-H-Util XBios</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node


!else


!begin_node Floprate
(!begin_liste) [Beschreibung]

!item [Name:]
ØFloppy rateÆ - liest oder setzt die seek rate eines Floppylaufwerks.

!item [Xbiosnummer:]
41

!item [Deklaration:]
int16_t Floprate( int16_t devno, int16_t newrate );

!item [Beschreibung:]
Die XBIOS-Routine Floprate liefert bzw. setzt die aktuelle Seekrate. Es
gilt:
!begin_xlist [Parameter]
!item [Parameter]
Bedeutung
!item [devno]
Laufwerksnummer
!begin_table [l l l]
0 !! = !! Laufwerk-A
1 !! = !! Laufwerk-B usw.
!end_table
!item [newrate]
!begin_table [r l l]
-1 !! = !! Seekrate nicht verÑndern
0 !! = !! Rate von  6ms
1 !! = !! Rate von 12ms
2 !! = !! Rate von  2ms
3 !! = !! Rate von  3ms
!end_table
!end_xlist
!label Floppy, Timeout der
!label Timeout der Floppy

(!B)Hinweis:(!b) Die Funktion steht erst ab TOS 1.04 zur VerfÅgung. Ab
MagiC-3 kann darÅberhinaus per Floprate (-1, newrate) der (!B)Timeout(!b)
fÅr die Floppy eingestellt werden; ein Wert von 300 bedeutet 1,5 Sekunden
(dies ist der Wert, der beim Booten per Default eingestellt ist).

!item [Ergebnis:]
Die Funktion liefert die vorherige Seekrate als Ergebnis.

!item [Gruppe:]
Laufwerksfunktionen

!item [VerfÅgbar:]
Die Funktion steht erst ab TOS 1.04 zur VerfÅgung.

!item [Querverweis:]
(!link [Binding] [Bindings fÅr Floprate]) ~ Flopwr ~ Floprd ~ Flopver ~
Flopfmt

(!ende_liste)


!begin_node Bindings fÅr Floprate
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
 #include <tos.h>

int16_t Floprate( int16_t devno, int16_t newrate );
!item [Assembler:]
!begin_verbatim
move.w    newrate,-(sp) ; Offset 4
move.w    devno,-(sp)   ; Offset 2
move.w    #41,-(sp)     ; Offset 0
trap      #14           ; XBIOS aufrufen
addq.l    #6,sp         ; Stack korrigieren
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7xbi.htm">GFA-H-Util XBios</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node


!endif