!iflang [english]

!begin_node Dreaddir
(!begin_liste) [Availability]
!item [Name:]
ØDreaddirÆ - Verzeichnis Informationen lesen.
!item [Opcode:]
297
!item [Syntax:]
int32_t Dreaddir ( int16_t len, int32_t dirhandle, int8_t *buf );

!item [Description:]
Die Funktion liefert die nÑchste Datei im Verzeichnis (!I)dirhandle(!i)
zurÅck. Der Dateiname und ein optionaler 4Byte Index fÅr die Datei, werden
in (!I)buf(!i) geschrieben.

Der Dateiindex wird weggelassen, wenn das Verzeichnis im
KompatibilitÑtsmodus geîffnet wurde, anderenfalls erscheint er als erstes in
(!I)buf(!i), gefolgt von einem (nullterminierten) Dateinamen.

(Ggfs. unterschiedliche) Namen mit gleichem Index, gehîren zur selben Datei.
(Ggfs gleiche) Namen mit unterschiedlichem Index gehîren zu verschiedenen
Dateien.

(!B)Hinweis fÅr (!nolink [MagiC]):(!b) FÅr FAT-Dateisysteme liefert die Funktion die
folgenden Index-Daten:
!begin_itemize !short
!item Verzeichnisse: Startcluster im Motorola-Format
!item sonstige Dateien:
!begin_xlist !short
!item [Hiword =]
Startcluster des Verzeichnisses
!item [Loword =]
Position innerhalb des Verzeichnisses >> 5
!end_xlist
!end_itemize
Dieses Verfahren ist Ñhnlich wie das, welches Linux und Solaris verwenden.
Nachteil ist, daû Dateien beim Verschieben ihren Index Ñndern.

In (!I)len(!i) muû die Grîûe des aufnehmenden Puffers angegeben werden.

!item [(!nolink [Return]) Value:]
Die Funktion kann folgende RÅckgabewerte liefern:
!begin_xlist !short [ERANGE :]
!item [E_OK :]
kein Fehler aufgetreten.
!item [ENMFIL :]
keine weiteren Dateien vorhanden.
!item [ERANGE :]
Die PufferlÑnge ist nicht ausreichend.
!end_xlist

!item [Availability:] Available when a 'MiNT' cookie with a version of at least
 0.90 exists und in MagiC ab Version 3.0.
 
!item [Group:] Directories Functions

!item [See Also:] (!link [Binding][Bindings for Dreaddir]) ~ Dclosedir ~
Dopendir ~  Drewinddir ~  Dxreaddir
(!ende_liste)


!begin_node Bindings for Dreaddir
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Dreaddir ( int16_t len, int32_t dirhandle, int8_t *buf );
!item [Assembler:]
!begin_verbatim
pea       buf          ; Offset 8
move.l    dirhandle    ; Offset 4
move.w    len          ; Offset 2
move.w    #297,-(sp)   ; Offset 0
trap      #1           ; GEMDOS
lea       $C(sp),sp    ; correct stack
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!else

!begin_node Dreaddir
(!begin_liste) [Beschreibung]
!item [Name:]
ØDreaddirÆ - Verzeichnis Informationen lesen.
!item [Gemdosnummer:]
297
!item [Deklaration:]
int32_t Dreaddir ( int16_t len, int32_t dirhandle, int8_t *buf );

!item [Beschreibung:]
Die Funktion liefert die nÑchste Datei im Verzeichnis (!I)dirhandle(!i)
zurÅck. Der Dateiname und ein optionaler 4Byte Index fÅr die Datei, werden
in (!I)buf(!i) geschrieben.

Der Dateiindex wird weggelassen, wenn das Verzeichnis im
KompatibilitÑtsmodus geîffnet wurde, anderenfalls erscheint er als erstes in
(!I)buf(!i), gefolgt von einem (nullterminierten) Dateinamen.

(Ggfs. unterschiedliche) Namen mit gleichem Index, gehîren zur selben Datei.
(Ggfs gleiche) Namen mit unterschiedlichem Index gehîren zu verschiedenen
Dateien.

(!B)Hinweis fÅr (!nolink [MagiC]):(!b) FÅr FAT-Dateisysteme liefert die Funktion die
folgenden Index-Daten:
!begin_itemize !short
!item Verzeichnisse: Startcluster im Motorola-Format
!item sonstige Dateien:
!begin_xlist !short
!item [Hiword =]
Startcluster des Verzeichnisses
!item [Loword =]
Position innerhalb des Verzeichnisses >> 5
!end_xlist
!end_itemize
Dieses Verfahren ist Ñhnlich wie das, welches Linux und Solaris verwenden.
Nachteil ist, daû Dateien beim Verschieben ihren Index Ñndern.

In (!I)len(!i) muû die Grîûe des aufnehmenden Puffers angegeben werden.

!item [Ergebnis:]
Die Funktion kann folgende RÅckgabewerte liefern:
!begin_xlist !short [ERANGE :]
!item [E_OK :]
kein Fehler aufgetreten.
!item [ENMFIL :]
keine weiteren Dateien vorhanden.
!item [ERANGE :]
Die PufferlÑnge ist nicht ausreichend.
!end_xlist

!item [VerfÅgbar:] Available when a 'MiNT' cookie with a version of at least
 0.90 exists und in MagiC ab Version 3.0.
 
!item [Gruppe:] Verzeichnisfunktionen

!item [Querverweis:] (!link [Binding][Bindings fÅr Dreaddir]) ~ Dclosedir ~
Dopendir ~  Drewinddir ~  Dxreaddir
(!ende_liste)


!begin_node Bindings fÅr Dreaddir
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Dreaddir ( int16_t len, int32_t dirhandle, int8_t *buf );
!item [Assembler:]
!begin_verbatim
pea       buf          ; Offset 8
move.l    dirhandle    ; Offset 4
move.w    len          ; Offset 2
move.w    #297,-(sp)   ; Offset 0
trap      #1           ; GEMDOS aufrufen
lea       $C(sp),sp    ; Stack korrigieren
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!endif
