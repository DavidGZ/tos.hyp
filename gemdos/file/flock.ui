!iflang [english]

!begin_node Flock
(!begin_liste) [Availability]
!item [Name:]
Øfile record lockingÆ - Teile einer Datei sperren oder freigeben.
!item [Opcode:]
92
!item [Syntax:]
int32_t Flock ( int16_t handle, int16_t mode, int32_t start, int32_t length );

!item [Description:]
Die GEMDOS-Routine Flock dient dazu, Teile von Dateien gegen den Zugriff von
anderen Prozessen zu schÅtzen. Es gilt:
!begin_xlist !short[Parameter]
!item [Parameter]
Bedeutung
!item [~]
~
!item [handle]
Dateikennung
!item [mode]
!begin_xlist !short
!item [0 =]
Blockierung setzen
!item [1 =]
Blockierung aufheben
!end_xlist
!item [start]
Startposition in der Datei
!item [length]
Anzahl der betroffenen Bytes
!end_xlist
(!B)Achtung:(!b) Diese Funktion ist optional, daher darf ein Aufruf mit
EINVFN beantwortet werden. Es sollte insbesondere beachtet werden, daû Flock
nicht auf (!I)allen(!i) installierten Dateisystemen zur VerfÅgung stehen
muss.
!item [(!nolink [Return]) Value:]
Die Funktion liefert folgende Resultate:
!begin_xlist !short [ENSLOCK :]
!item [E_OK :]
kein Fehler aufgetreten
!item [ELOCKED :]
Blockierung bereits vorhanden
!item [ENSLOCK :]
Blockierung existiert nicht
!end_xlist

!item [Availability:]
Only present when '_FLK' cookie exists.

!item [Group:]
File Functions

!item [See Also:] (!link [Binding] [Bindings for Flock ]) ~ Fcreate ~
    Fopen ~ Fclose ~ Fdelete ~ Ptermres ~ F_SETLK
(!ende_liste)


!begin_node Bindings for Flock
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Flock ( int16_t handle, int16_t mode, int32_t start, int32_t length );
!item [Assembler:]
!begin_verbatim
move.l    length,-(sp)  ; Offset 10
move.l    start,-(sp)   ; Offset  6
move.w    mode,-(sp)    ; Offset  4
move.w    handle,-(sp)  ; Offset  2
move.w    #92,-(sp)     ; Offset  0
trap      #1            ; GEMDOS
lea       $E(sp),sp     ; correct stack
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!else

!begin_node Flock
(!begin_liste) [Beschreibung]
!item [Name:]
Øfile record lockingÆ - Teile einer Datei sperren oder freigeben.
!item [Gemdosnummer:]
92
!item [Deklaration:]
int32_t Flock ( int16_t handle, int16_t mode, int32_t start, int32_t length );

!item [Beschreibung:]
Die GEMDOS-Routine Flock dient dazu, Teile von Dateien gegen den Zugriff von
anderen Prozessen zu schÅtzen. Es gilt:
!begin_xlist !short[Parameter]
!item [Parameter]
Bedeutung
!item [~]
~
!item [handle]
Dateikennung
!item [mode]
!begin_xlist !short
!item [0 =]
Blockierung setzen
!item [1 =]
Blockierung aufheben
!end_xlist
!item [start]
Startposition in der Datei
!item [length]
Anzahl der betroffenen Bytes
!end_xlist
(!B)Achtung:(!b) Diese Funktion ist optional, daher darf ein Aufruf mit
EINVFN beantwortet werden. Es sollte insbesondere beachtet werden, daû Flock
nicht auf (!I)allen(!i) installierten Dateisystemen zur VerfÅgung stehen
muss.
!item [Ergebnis:]
Die Funktion liefert folgende Resultate:
!begin_xlist !short [ENSLOCK :]
!item [E_OK :]
kein Fehler aufgetreten
!item [ELOCKED :]
Blockierung bereits vorhanden
!item [ENSLOCK :]
Blockierung existiert nicht
!end_xlist

!item [VerfÅgbar:]
Only present when '_FLK' cookie exists.

!item [Gruppe:]
Dateifunktionen

!item [Querverweis:] (!link [Binding] [Bindings fÅr Flock ]) ~ Fcreate ~
    Fopen ~ Fclose ~ Fdelete ~ Ptermres ~ F_SETLK
(!ende_liste)


!begin_node Bindings fÅr Flock
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Flock ( int16_t handle, int16_t mode, int32_t start, int32_t length );
!item [Assembler:]
!begin_verbatim
move.l    length,-(sp)  ; Offset 10
move.l    start,-(sp)   ; Offset  6
move.w    mode,-(sp)    ; Offset  4
move.w    handle,-(sp)  ; Offset  2
move.w    #92,-(sp)     ; Offset  0
trap      #1            ; GEMDOS aufrufen
lea       $E(sp),sp     ; Stack korrigieren
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!endif
