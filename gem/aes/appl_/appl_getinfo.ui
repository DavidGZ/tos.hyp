!iflang [english]

!begin_node appl_getinfo
(!begin_liste) [Availability]
!item [Name:]
ØApplication get informationÆ - Informationen Åber vorhandene
Funktionsaufrufe und Eigenschaften erfragen.
!item [Opcode:]
130
!item [Syntax:]
int16_t appl_getinfo ( int16_t ap_gtype, int16_t *ap_gout1, int16_t *ap_gout2,
                    int16_t *ap_gout3, int16_t *ap_gout4 );

!item [Description:]
Mit dieser Funktion lassen sich gezielt Eigenschaften des Betriebssystems
zur Laufzeit erfragen.

(!I)ap_gtype(!i) bestimmt die Art der Informationen, die erfragt werden
sollen. Es bedeutet:

!label %apgi_0
(!B)0: Get AES regular font information(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:] font height
!item [ap_gout2:] font id
!item [ap_gout3:] font type (0=system font, 1=FSM font)
!end_xlist

!label %apgi_1
(!B)1: Get AES small font information(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:] font height
!item [ap_gout2:] font id
!item [ap_gout3:] font type (0=system font, 1=FSM font)
!end_xlist

!label %apgi_2
!label VDI-GerÑtenummer
!label GerÑtenummer des VDI
!label Resource-Format, neues
!label Farbicons vorhanden?
!label Icons vorhanden?, Farb-
(!B)2: Farben(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
VDI-GerÑtenummer (device id)
!item [ap_gout2:]
number of colors supported by AES object library
!item [ap_gout3:]
color icons vorhanden (1) bzw. nicht (0)
!item [ap_gout4:]
new resource file format vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_3
!label Sprache des Betriebssystems
(!B)3: AES language(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
!begin_table [l l l]
0 !! - !! English
1 !! - !! German
2 !! - !! French
3 !! - !! reserved
4 !! - !! Spanish
5 !! - !! Italian
6 !! - !! Swedish
!end_table
!end_xlist

!label %apgi_4
!label Multitasking preemptive?
!label PrÑemptives Multitasking?
!label Preemptives Multitasking?
(!B)4: general AES environment info 1(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
Multitasking prÑemptiv (1) oder nicht (0)
!item [ap_gout2:]
appl_find konvertiert MiNT/(!nolink [AES])-ID's (1) oder nicht (0)
!item [ap_gout3:]
appl_search vorhanden (1) oder nicht (0)
!item [ap_gout4:]
rsrc_rcfix vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_5
(!B)5: general AES environment info 2(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
objc_xfind vorhanden (1) oder nicht (0)
!item [ap_gout2:]
reserved, always 0
!item [ap_gout3:]
menu_click vorhanden (1) oder nicht (0)
!item [ap_gout4:]
shel_r/wdef vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_6
(!B)6: general AES environment info 3(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
appl_read (-1) vorhanden (1) oder nicht (0)
!item [ap_gout2:]
shel_get (-1) vorhanden (1) oder nicht (0)
!item [ap_gout3:]
menu_bar (-1) vorhanden (1) oder nicht (0)
!item [ap_gout4:]
menu_bar (100) (MagiC) vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_7
(!B)7: Reserved for (!nolink [MagiC]) and other OS extensions, MultiTOS sets all
(!nolink [return]) values always 0. In MagiC:(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
!begin_xlist !short
!item [Bit 0:] wdlg_xx()-Funktionen vorhanden (1) 
!item [Bit 1:] lbox_xx()-Funktionen vorhanden (1)
!item [Bit 2:] fnts_xx()-Funktionen vorhanden (1)
!item [Bit 3:] fslx_xx()-Funktionen vorhanden (1)
!item [Bit 4:] pdlg_xx()-Funktionen vorhanden (1)
!end_xlist
!item [ap_gout2:]
reserved 
!item [ap_gout3:]
reserved
!item [ag_gout4:]
reserved
!end_xlist

!label %apgi_8
!label Mausformverwaltung, Art der
!label Verwaltung der Mausform
(!B)8: Mouse support(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
graf_mouse Modi (258-260) vorhanden (1) oder nicht (0)
!item [ap_gout2:]
Mausform vom (!nolink [AES]) fÅr jede Applikation verwaltet (1) oder nicht (0)
!item [ap_gout3:]
Mouse wheels support (XaAES)
!end_xlist

!label %apgi_9
(!B)9: Menu support(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
MultiTOS-SubmenÅs vorhanden (1) oder nicht (0)
!item [ap_gout2:]
MultiTOS-Popups vorhanden (1) oder nicht (0)
!item [ap_gout3:]
MultiTOS-ScrollmenÅs vorhanden (1) oder nicht (0)
!item [ap_gout4:]
erweiterte MN_SELECTED-Nachricht vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_10
(!B)10: shel_write(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
modes supported
!begin_xlist !short [Bit 8..15:]
!item [Bit 0..7:]
indicates highest legal value for (sh_wdoex & 0x00ff)
!item [Bit 8..15:]
indicates which bits in (sh_wdoex & 0xFF00) are supported as in MultiTOS
!end_xlist
!item [ap_gout2:]
!begin_xlist !short [0:]
!item [1:]
(!nolink [shel_write]) (0) macht vorherige (!nolink [shel_write]) Aufrufe ungÅltig (d.h. das Desktop
wird Nachfolgeprogramm) (TOS 1.04 und MagiC)
!item [0:]
startet Programm (MultiTOS)
!end_xlist
!item [ap_gout3:]
!begin_xlist !short [0:]
!item [1:]
(!nolink [shel_write]) (1) startet Programm nach Beendigung des laufenden (TOS 1.04 und
(!nolink [MagiC]))
!item [0:]
startet Programm sofort (MultiTOS)
!end_xlist
!item [ap_gout4:]
ARGV via sh_wiscr unterstÅtzt (1) oder nicht (0)
!end_xlist

!label %apgi_11
(!B)11: window support(!b)
!begin_xlist !short [ap_gout1:]
!item [ag_gout1:]
extended WF_ functions available in wind_get/set (0=not available, 1=available)
!begin_xlist !short [Bit 0:]
!item [Bit 0:] WF_TOP returns window below current one
!item [Bit 1:] (!nolink [wind_get]) (WF_NEWDESK)
!item [Bit 2:] wind_g/set (WF_COLOR)
!item [Bit 3:] wind_g/set (WF_DCOLOR)
!item [Bit 4:] (!nolink [wind_get]) (WF_OWNER)
!item [Bit 5:] wind_g/set (WF_BEVENT)
!item [Bit 6:] WF_BOTTOM
!item [Bit 7:] WF_ICONIFY
!item [Bit 8:] WF_UNICONIFY
!item [Bit 9:] WF_WHEEL
!item [Bit 10..15:] reserved, 0
!end_xlist

!item [ap_gout2:]
!begin_xlist !short [Bit 0:]
!item [Bit 0:]
(!nolink [wind_get])/set (WF_WIDGETS), N.AES
!item [Bit 1..15:]
reserved
!end_xlist
!item [ap_gout3:]
new gadgets supported: (0=supported, 1=not supported)
!begin_xlist !short [Bit 0:]
!item [Bit 0:] iconifier
!item [Bit 1:] Backdrop-Button (MagiC)
!item [Bit 2:] Shift-Click fÅr Backdrop
!item [Bit 3:] "hot" close box (GEM/3 und MagiC)
!item [Bit 4..15:] reserved, 0
!end_xlist
!item [ap_gout4:]
wind_update 'check and set' vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_12
(!B)12: messages sent to applications(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
bit field of extra messages supported (1) (0=no,1=yes)
!begin_xlist !short [Bit 0:]
!item [Bit 0:] WM_NEWTOP
!item [Bit 1:] WM_UNTOPPED
!item [Bit 2:] WM_ONTOP
!item [Bit 3:] AP_TERM
!item [Bit 4:] MultiTOS shutdown and resolution change messages supported
!item [Bit 5:] CH_EXIT
!item [Bit 6:] WM_BOTTOM
!item [Bit 7:] WM_ICONIFY
!item [Bit 8:] WM_UNICONIFY
!item [Bit 9:] WM_ALLICONIFY
!end_xlist
!item [ap_gout2:] reserved, all 0
!item [ap_gout3:] WM_ICONIFY liefert Koordinaten (1) oder nicht (0)
!end_xlist

!label %apgi_13
(!B)13: object information(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
3D-Objekte Åber ob_flags vorhanden (1) oder nicht (0)
!item [ap_gout2:]
0 - objc_sysvar nicht vorhanden (!nl)
1 - MultiTOS 1.01 (!nolink [objc_sysvar]) (!nl)
2 - extended (!nolink [objc_sysvar])
!item [ap_gout3:]
Speedo- und GDOS-Fonts im TEDINFO erlaubt (1) oder nicht (0)
!item [ap_gout4:]
reserviert fÅr MagiC und andere Erweiterungen, MultiTOS setzt alle
RÅckgabewerte immer auf 0. In (!nolink [MagiC]) und N.AES gilt:
!begin_xlist !short [Bit 0:]
!item [Bit 0:] G_SWBUTTON supported
!item [Bit 1:] G_POPUP supported
!item [Bit 2:] WHITEBAK steuert Unterstriche und Buttons
!item [Bit 3:] G_SHORTCUT supported
!end_xlist
!end_xlist

!label %apgi_14
!label Flydials vorhanden?
!label Tastaturtabellen vorhanden?
!label MagiC-Flydials vorhanden?
!label MagiC-Tastaturtab. vorhanden?
!label Cursorposition, RÅckgabe der
(!B)14: Formulare ((!nolink [MagiC]) form_xdo und form_xdial)(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
(!nolink [MagiC])-Flydials vorhanden (1) oder nicht (0)
!item [ap_gout2:]
(!nolink [MagiC])-Tastaturtabellen vorhanden (1) oder nicht (0)
!item [ap_gout3:]
letzte Cursorposition wird zurÅckgegeben (1) oder nicht (0)
!item [ap_gout4:]
reserved, 0
!end_xlist

!label %apgi_64
(!B)64: Erweiterte Funktionen(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
shel_write(10) mit AP_AESTERM mîglich (1) oder nicht (0)
!item [ap_gout2:]
extended (!nolink [shel_write])() SHW_SHUTDOWN(4)/SHW_RESCHANGE(5) vorhanden (1)
oder nicht (0)
!item [ap_gout3:]
appl_search() mit Langnamen vorhanden (1) oder nicht (0)
!item [ap_gout4:]
form_error() mit allen GEMDOS-Fehlercodes vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_65
(!B)65: ZusÑtzliche N.(!nolink [AES]) Funktionen(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:] appl_control() vorhanden (1) oder nicht (0)
!item [ap_gout2:] hîchster Opcode fÅr (!nolink [appl_control])()
!item [ap_gout3:] shel_help() vorhanden (1) oder nicht (0)
!item [ap_gout4:] wind_draw() vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_22360
(!B)22360: Infos zu Erweiterungen in WINX(!b) (!nl)
(dieser Informationstyp existiert seit WINX 2.3)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
Bitvektor fÅr WF_-Funktionen in wind_get/wind_set
!begin_xlist !short [Bit 0:]
!item [Bit 0:] WF_WINX
!item [Bit 1:] WF_WINXCFG
!item [Bit 2:] WF_DDELAY
!item [Bit 3:] WF_SHADE
!item [Bit 4:] WF_STACK
!item [Bit 5:] WF_TOPALL
!item [Bit 6:] WF_BOTTOMALL
!item [Bit 7:] WF_KIND
!end_xlist

!item [ap_gout2:]
Bitvektor fÅr AES-Nachrichten
!begin_xlist !short [Bit 0:]
!item [Bit 0:] Erweitertes WM_ARROWED
!item [Bit 1:] WM_SHADED Nachricht wird versandt
!item [Bit 2:] WM_UNSHADED Nachricht wird versandt
!end_xlist

!item [ap_gout3:]
Bitvektor fÅr Erweiterungen von AES-Funktionen
!begin_xlist !short [Bit 0:]
!item [Bit 0:] wind_calc erlaubt WC_WIN-Modi
!end_xlist

!item [ap_gout4:]
Bitvektor fÅr allgemeine Informationen zum AES
!begin_xlist !short [Bit 0:]
!item [Bit 0:] DPAT-Schreibtischhintergrund wird vom AES direkt unterstÅtzt
!end_xlist
!end_xlist

(!B)Hinweis:(!b) Ein Problem dieser Funktion besteht darin, festzustellen,
wann sie Åberhaupt aufgerufen werden darf. Zwar sollte sie ab AES-Version
4.0 vorhanden sein, MagiC 2.0 (und auch MagiC 3.0) besitzt
aber beispielsweise die Version 3.99. Aus diesem Grund definieren viele
Programmierer die Funktion appl_xgetinfo, in der ÅberprÅft wird, ob
appl_getinfo in der aktuellen Systemumgebung vorhanden ist.

!item [(!nolink [Return]) Value:]
Ein RÅckgabewert von 0 zeigt einen Fehler an; bei einem Wert von 1 ist kein
Fehler aufgetreten.

!item [Availability:]
Available as of AES version 4.00.

!item [Group:]
(!link [Applications][Applikationsfunktionen])
!item [See Also:]
(!link [Binding] [Bindings for appl_getinfo])

(!ende_liste)



!begin_node Bindings for appl_getinfo
!ignore_index
(!begin_liste) [GEM-Arrays]
!item [C:]
int16_t appl_getinfo ( int16_t ap_gtype, int16_t *ap_gout1, int16_t *ap_gout2,
                    int16_t *ap_gout3, int16_t *ap_gout4 );
!item [Binding:]
!begin_verbatim
int16_t appl_getinfo (int16_t ap_gtype, int16_t *ap_gout1,
                      int16_t *ap_gout2, int16_t *ap_gout3,
                      int16_t *ap_gout4)
{
   int_in[0] = ap_gtype;

   crys_if (130);

   *ap_gout1 = int_out[1];
   *ap_gout2 = int_out[2];
   *ap_gout3 = int_out[3];
   *ap_gout4 = int_out[4];

   return ( int_out[0] ); 
} 
!end_verbatim
!item [GEM-Arrays:]
!begin_table [l l l]
Adresse !! Feldelement !! Belegung
!hline
control   !! control[0] !! 130   # Function Opcode
control+2 !! control[1] !! 1     # entry in int_in
control+4 !! control[2] !! 5     # entry in int_out
control+6 !! control[3] !! 0     # entry in addr_in
control+8 !! control[4] !! 0     # entry in addr_out
int_in !! int_in[0] !! ap_gtype
int_out !! int_out[0] !! Return-Wert
int_out+2 !! int_out[1] !! ap_gout1
int_out+4 !! int_out[2] !! ap_gout2
int_out+6 !! int_out[3] !! ap_gout3
int_out+8 !! int_out[4] !! ap_gout4
!end_table
(!ende_liste)
!end_node



!begin_node appl_xgetinfo
!label appl_getinfo, Existenz von
!begin_verbatim
/* Der folgende Code testet, ob appl_getinfo in der aktuellen
   Systemumgebung zur VerfÅgung steht, und ruft im positiven
   Fall die besagte Funktion auf.
   
   Es bietet sich an, statt appl_getinfo nur appl_xgetinfo
   in eigenen Programmen zu verwenden. */
   
   
GLOBAL int16_t appl_xgetinfo ( int16_t type, int16_t *out1, int16_t *out2,
                            int16_t *out3, int16_t *out4 )
{

   BOOLEAN has_agi = FALSE;

   has_agi = ((_GemParBlk.global[0] == 0x399 && (is_MagiC() >= 0x0200))
             || (_GemParBlk.global[0] >= 0x400)
             || (appl_find ("?AGI") >= 0));

   if (has_agi)
      return (appl_getinfo (type, out1, out2, out3, out4));
   else
      return (0);
} /* appl_xgetinfo */
!end_verbatim

Die Abfrage is_MagiC ist eine Funktion, welche den (!nolink [MagiC])-Cookie
auswertet und die
Versionsnummer zurÅckliefert. Dies ist notwendig da bereits (!nolink [MagiC]) 2
die Funktion
(!nolink [appl_getinfo]) kennt, allerdings noch nicht die Abfrage per "?AGI" erlaubt.

See Also: (!link [Applications][Applikationsfunktionen]) ~  GEM ~
Style-Guidelines
!end_node
!end_node

!else

!begin_node appl_getinfo
(!begin_liste) [Beschreibung]
!item [Name:]
ØApplication get informationÆ - Informationen Åber vorhandene
Funktionsaufrufe und Eigenschaften erfragen.
!item [AES-Nummer:]
130
!item [Deklaration:]
int16_t appl_getinfo ( int16_t ap_gtype, int16_t *ap_gout1, int16_t *ap_gout2,
                    int16_t *ap_gout3, int16_t *ap_gout4 );

!item [Beschreibung:]
Mit dieser Funktion lassen sich gezielt Eigenschaften des Betriebssystems
zur Laufzeit erfragen.

(!I)ap_gtype(!i) bestimmt die Art der Informationen, die erfragt werden
sollen. Es bedeutet:

!label %apgi_0
(!B)0: Informationen Åber den normalen AES-Zeichensatz(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
Fonthîhe
!item [ap_gout2:]
Font-ID
!item [ap_gout3:]
Font-Typ (0=system, 1=FSM)
!end_xlist

!label %apgi_1
(!B)1: Informationen Åber den kleinen Zeichensatz(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
Fonthîhe
!item [ap_gout2:]
Font-ID
!item [ap_gout3:]
Font-Typ (0=system, 1=FSM)
!end_xlist

!label %apgi_2
!label VDI-GerÑtenummer
!label GerÑtenummer des VDI
!label Resource-Format, neues
!label Farbicons vorhanden?
!label Icons vorhanden?, Farb-
(!B)2: Farben(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
VDI-GerÑtenummer (device id)
!item [ap_gout2:]
Farben fÅr OBJECTs
!item [ap_gout3:]
Farbicons vorhanden (1) bzw. nicht (0)
!item [ap_gout4:]
neues RSC-Format vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_3
!label Sprache des Betriebssystems
(!B)3: Sprache(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
!begin_table [l l l]
0 !! - !! Englisch
1 !! - !! Deutsch
2 !! - !! Franzîsisch
3 !! - !! reserviert
4 !! - !! Spanisch
5 !! - !! Italienisch
6 !! - !! Schwedisch
!end_table
!end_xlist

!label %apgi_4
!label Multitasking preemptive?
!label PrÑemptives Multitasking?
!label Preemptives Multitasking?
(!B)4: allgemeine Informationen-1(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
Multitasking prÑemptiv (1) oder nicht (0)
!item [ap_gout2:]
appl_find konvertiert MiNT/(!nolink [AES])-ID's (1) oder nicht (0)
!item [ap_gout3:]
appl_search vorhanden (1) oder nicht (0)
!item [ap_gout4:]
rsrc_rcfix vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_5
(!B)5: allgemeine Informationen-2(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
objc_xfind vorhanden (1) oder nicht (0)
!item [ap_gout2:]
reserviert, immer 0
!item [ap_gout3:]
menu_click vorhanden (1) oder nicht (0)
!item [ap_gout4:]
shel_r/wdef vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_6
(!B)6: allgemeine Informationen-3(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
appl_read (-1) vorhanden (1) oder nicht (0)
!item [ap_gout2:]
shel_get (-1) vorhanden (1) oder nicht (0)
!item [ap_gout3:]
menu_bar (-1) vorhanden (1) oder nicht (0)
!item [ap_gout4:]
menu_bar (100) (MagiC) vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_7
(!B)7: reserviert fÅr (!nolink [MagiC]) und andere Erweiterungen, MultiTOS setzt alle
RÅckgabewerte immer auf 0. In MagiC gilt:(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
!begin_xlist !short
!item [Bit 0:]
wdlg_xx()-Funktionen vorhanden (1) 
!item [Bit 1:]
lbox_xx()-Funktionen vorhanden (1)
!item [Bit 2:]
fnts_xx()-Funktionen vorhanden (1)
!item [Bit 3:]
fslx_xx()-Funktionen vorhanden (1)
!item [Bit 4:]
pdlg_xx()-Funktionen vorhanden (1)
!end_xlist
!item [ap_gout2:]
reserviert 
!item [ap_gout3:]
reserviert
!item [ag_gout4:]
reserviert
!end_xlist

!label %apgi_8
!label Mausformverwaltung, Art der
!label Verwaltung der Mausform
(!B)8: Maus(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
graf_mouse Modi (258-260) vorhanden (1) oder nicht (0)
!item [ap_gout2:]
Mausform vom (!nolink [AES]) fÅr jede Applikation verwaltet (1) oder nicht (0)
!item [ap_gout3:]
Mausrad UnterstÅtzung (XaAES)
!end_xlist

!label %apgi_9
(!B)9: MenÅs(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
MultiTOS-SubmenÅs vorhanden (1) oder nicht (0)
!item [ap_gout2:]
MultiTOS-Popups vorhanden (1) oder nicht (0)
!item [ap_gout3:]
MultiTOS-ScrollmenÅs vorhanden (1) oder nicht (0)
!item [ap_gout4:]
erweiterte MN_SELECTED-Nachricht vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_10
(!B)10: shel_write(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
vorhandene Modi
!begin_xlist !short [Bit 8..15:]
!item [Bit 0..7:]
hîchster zulÑssiger Wert fÅr sh_wdoex & 0x00ff
!item [Bit 8..15:]
Bits von sh_wdoex & 0xff00, die wie in MultiTOS behandelt werden.
!end_xlist
!item [ap_gout2:]
!begin_xlist !short [0:]
!item [1:]
(!nolink [shel_write]) (0) macht vorherige (!nolink [shel_write]) Aufrufe ungÅltig (d.h. das Desktop
wird Nachfolgeprogramm) (TOS 1.04 und MagiC)
!item [0:]
startet Programm (MultiTOS)
!end_xlist
!item [ap_gout3:]
!begin_xlist !short [0:]
!item [1:]
(!nolink [shel_write]) (1) startet Programm nach Beendigung des laufenden (TOS 1.04 und
(!nolink [MagiC]))
!item [0:]
startet Programm sofort (MultiTOS)
!end_xlist
!item [ap_gout4:]
ARGV via sh_wiscr unterstÅtzt (1) oder nicht (0)
!end_xlist

!label %apgi_11
(!B)11: Fenster(!b)
!begin_xlist !short [ap_gout1:]
!item [ag_gout1:]
gesetzte Bits sind unterstÅtzte Funktionen:
!begin_xlist !short [Bit 0:]
!item [Bit 0:] WF_TOP liefert zweitoberstes Fenster
!item [Bit 1:] (!nolink [wind_get]) (WF_NEWDESK)
!item [Bit 2:] wind_g/set (WF_COLOR)
!item [Bit 3:] wind_g/set (WF_DCOLOR)
!item [Bit 4:] (!nolink [wind_get]) (WF_OWNER)
!item [Bit 5:] wind_g/set (WF_BEVENT)
!item [Bit 6:] WF_BOTTOM
!item [Bit 7:] WF_ICONIFY
!item [Bit 8:] WF_UNICONIFY
!item [Bit 9:] WF_WHEEL
!item [Bit 10..15:] reserviert, immer 0
!end_xlist

!item [ap_gout2:]
!begin_xlist !short [Bit 0:]
!item [Bit 0:] (!nolink [wind_get])/set (WF_WIDGETS), N.AES
!item [Bit 1..15:] reserviert
!end_xlist
!item [ap_gout3:]
vorhandene Fensterbuttons
!begin_xlist !short [Bit 0:]
!item [Bit 0:] Iconifier
!item [Bit 1:] Backdrop-Button (MagiC)
!item [Bit 2:] Shift-Click fÅr Backdrop
!item [Bit 3:] "Hot" Closebox (GEM/3 und MagiC)
!item [Bit 4..15:] reserviert, 0
!end_xlist
!item [ap_gout4:]
wind_update 'check and set' vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_12
(!B)12: Nachrichten(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
gesetzte Bits sind unterstÅtzte Nachrichten:
!begin_xlist !short [Bit 0:]
!item [Bit 0:] WM_NEWTOP
!item [Bit 1:] WM_UNTOPPED
!item [Bit 2:] WM_ONTOP
!item [Bit 3:] AP_TERM
!item [Bit 4:] MultiTOS-Auflîsungswechsel
!item [Bit 5:] CH_EXIT
!item [Bit 6:] WM_BOTTOM
!item [Bit 7:] WM_ICONIFY
!item [Bit 8:] WM_UNICONIFY
!item [Bit 9:] WM_ALLICONIFY
!end_xlist
!item [ap_gout2:]
reserviert, alle 0
!item [ap_gout3:]
WM_ICONIFY liefert Koordinaten (1) oder nicht (0)
!end_xlist

!label %apgi_13
(!B)13: OBJECTs(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
3D-Objekte Åber ob_flags vorhanden (1) oder nicht (0)
!item [ap_gout2:]
0 - objc_sysvar nicht vorhanden (!nl)
1 - MultiTOS 1.01 (!nolink [objc_sysvar]) (!nl)
2 - extended (!nolink [objc_sysvar])
!item [ap_gout3:]
Speedo- und GDOS-Fonts im TEDINFO erlaubt (1) oder nicht (0)
!item [ap_gout4:]
reserviert fÅr MagiC und andere Erweiterungen, MultiTOS setzt alle
RÅckgabewerte immer auf 0. In (!nolink [MagiC]) und N.AES gilt:
!begin_xlist !short [Bit 0:]
!item [Bit 0:] G_SWBUTTON vorhanden
!item [Bit 1:] G_POPUP vorhanden
!item [Bit 2:] WHITEBAK steuert Unterstriche und Buttons
!item [Bit 3:] G_SHORTCUT vorhanden
!end_xlist
!end_xlist

!label %apgi_14
!label Flydials vorhanden?
!label Tastaturtabellen vorhanden?
!label MagiC-Flydials vorhanden?
!label MagiC-Tastaturtab. vorhanden?
!label Cursorposition, RÅckgabe der
(!B)14: Formulare ((!nolink [MagiC]) form_xdo und form_xdial)(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
(!nolink [MagiC])-Flydials vorhanden (1) oder nicht (0)
!item [ap_gout2:]
(!nolink [MagiC])-Tastaturtabellen vorhanden (1) oder nicht (0)
!item [ap_gout3:]
letzte Cursorposition wird zurÅckgegeben (1) oder nicht (0)
!item [ap_gout4:]
reserviert, 0
!end_xlist

!label %apgi_64
(!B)64: Erweiterte Funktionen(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
shel_write(10) mit AP_AESTERM mîglich (1) oder nicht (0)
!item [ap_gout2:]
extended (!nolink [shel_write])() SHW_SHUTDOWN(4)/SHW_RESCHANGE(5) vorhanden (1)
oder nicht (0)
!item [ap_gout3:]
appl_search() mit Langnamen vorhanden (1) oder nicht (0)
!item [ap_gout4:]
form_error() mit allen GEMDOS-Fehlercodes vorhanden (1) oder nicht (0)
!end_xlist

!label %apgi_65
(!B)65: ZusÑtzliche N.(!nolink [AES]) Funktionen(!b)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:] appl_control() vorhanden (1) oder nicht (0)
!item [ap_gout2:] hîchster Opcode fÅr (!nolink [appl_control])()
!item [ap_gout3:] shel_help() vorhanden (1) oder nicht (0)
!item [ap_gout4:] wind_draw() vorhanden (1) oder nicht (0)
!end_xlist


!label %apgi_22360
(!B)22360: Infos zu Erweiterungen in WINX(!b) (!nl)
(dieser Informationstyp existiert seit WINX 2.3)
!begin_xlist !short [ap_gout1:]
!item [ap_gout1:]
Bitvektor fÅr WF_-Funktionen in wind_get/wind_set
!begin_xlist !short [Bit 0:]
!item [Bit 0:] WF_WINX
!item [Bit 1:] WF_WINXCFG
!item [Bit 2:] WF_DDELAY
!item [Bit 3:] WF_SHADE
!item [Bit 4:] WF_STACK
!item [Bit 5:] WF_TOPALL
!item [Bit 6:] WF_BOTTOMALL
!item [Bit 7:] WF_KIND
!end_xlist

!item [ap_gout2:]
Bitvektor fÅr AES-Nachrichten
!begin_xlist !short [Bit 0:]
!item [Bit 0:] Erweitertes WM_ARROWED
!item [Bit 1:] WM_SHADED Nachricht wird versandt
!item [Bit 2:] WM_UNSHADED Nachricht wird versandt
!end_xlist

!item [ap_gout3:]
Bitvektor fÅr Erweiterungen von AES-Funktionen
!begin_xlist !short [Bit 0:]
!item [Bit 0:] wind_calc erlaubt WC_WIN-Modi
!end_xlist

!item [ap_gout4:]
Bitvektor fÅr allgemeine Informationen zum AES
!begin_xlist !short [Bit 0:]
!item [Bit 0:] DPAT-Schreibtischhintergrund wird vom AES direkt unterstÅtzt
!end_xlist
!end_xlist


(!B)Hinweis:(!b) Ein Problem dieser Funktion besteht darin, festzustellen,
wann sie Åberhaupt aufgerufen werden darf. Zwar sollte sie ab AES-Version
4.0 vorhanden sein, MagiC 2.0 (und auch MagiC 3.0) besitzt
aber beispielsweise die Version 3.99. Aus diesem Grund definieren viele
Programmierer die Funktion appl_xgetinfo, in der ÅberprÅft wird, ob
appl_getinfo in der aktuellen Systemumgebung vorhanden ist.
!item [Ergebnis:]
Ein RÅckgabewert von 0 zeigt einen Fehler an; bei einem Wert von 1 ist kein
Fehler aufgetreten.

!item [VerfÅgbar:]
Available as of AES version 4.00.

!item [Gruppe:]
(!link [Applikationen][Applikationsfunktionen])
!item [Querverweis:]
(!link [Binding] [Bindings fÅr appl_getinfo])

(!ende_liste)



!begin_node Bindings fÅr appl_getinfo
!ignore_index
(!begin_liste) [GEM-Arrays]
!item [C:]
int16_t appl_getinfo ( int16_t ap_gtype, int16_t *ap_gout1, int16_t *ap_gout2,
                    int16_t *ap_gout3, int16_t *ap_gout4 );
!item [Umsetzung:]
!begin_verbatim
int16_t appl_getinfo (int16_t ap_gtype, int16_t *ap_gout1,
                      int16_t *ap_gout2, int16_t *ap_gout3,
                      int16_t *ap_gout4)
{
   int_in[0] = ap_gtype;

   crys_if (130);

   *ap_gout1 = int_out[1];
   *ap_gout2 = int_out[2];
   *ap_gout3 = int_out[3];
   *ap_gout4 = int_out[4];

   return ( int_out[0] ); 
} 
!end_verbatim
!item [GEM-Arrays:]
!begin_table [l l l]
Adresse !! Feldelement !! Belegung
!hline
control   !! control[0] !! 130   # Opcode der Funktion
control+2 !! control[1] !! 1     # EintrÑge in int_in
control+4 !! control[2] !! 5     # EintrÑge in int_out
control+6 !! control[3] !! 0     # EintrÑge in addr_in
control+8 !! control[4] !! 0     # EintrÑge in addr_out
int_in !! int_in[0] !! ap_gtype
int_out !! int_out[0] !! Return-Wert
int_out+2 !! int_out[1] !! ap_gout1
int_out+4 !! int_out[2] !! ap_gout2
int_out+6 !! int_out[3] !! ap_gout3
int_out+8 !! int_out[4] !! ap_gout4
!end_table
(!ende_liste)
!end_node



!begin_node appl_xgetinfo
!label appl_getinfo, Existenz von
!begin_verbatim
/* Der folgende Code testet, ob appl_getinfo in der aktuellen
   Systemumgebung zur VerfÅgung steht, und ruft im positiven
   Fall die besagte Funktion auf.
   
   Es bietet sich an, statt appl_getinfo nur appl_xgetinfo
   in eigenen Programmen zu verwenden. */
   
   
GLOBAL int16_t appl_xgetinfo ( int16_t type, int16_t *out1, int16_t *out2,
                            int16_t *out3, int16_t *out4 )
{

   BOOLEAN has_agi = FALSE;

   has_agi = ((_GemParBlk.global[0] == 0x399 && (is_MagiC() >= 0x0200))
             || (_GemParBlk.global[0] >= 0x400)
             || (appl_find ("?AGI") >= 0));

   if (has_agi)
      return (appl_getinfo (type, out1, out2, out3, out4));
   else
      return (0);
} /* appl_xgetinfo */
!end_verbatim

Die Abfrage is_MagiC ist eine Funktion, welche den (!nolink [MagiC])-Cookie
auswertet und die
Versionsnummer zurÅckliefert. Dies ist notwendig da bereits (!nolink [MagiC]) 2
die Funktion
(!nolink [appl_getinfo]) kennt, allerdings noch nicht die Abfrage per "?AGI" erlaubt.

Querverweis: (!link [Applikationen][Applikationsfunktionen]) ~  GEM ~
Style-Guidelines
!end_node
!end_node

!endif
