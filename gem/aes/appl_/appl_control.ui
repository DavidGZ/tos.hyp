!iflang [english]

!begin_node appl_control
(!begin_liste) [Availability]
!item [Name:]
Gezieltes Steuern von Anwendungen.
!item [Opcode:]
129
!item [Syntax:]
int16_t appl_control ( int16_t ap_cid, int16_t ap_cwhat, void *ap_cout);

!item [Description:]
Can be used to control the activity of applications.
!begin_xlist [Parameter]
!item [Parameter]
Bedeutung

!item [ap_cid]
The AES ID (apid) of the application you want to control.

!item [ap_cwhat]
The type of control:

!begin_xlist [APC_WIDGETS ]

!item [0 bis 9]              Reserved for N.AES.

!label APC_HIDE
!item [APC_HIDE (10)]         Hide (fade out) application. (!nl)
                     If ap_cid is -1, the active application will be hidden.
                     

!label APC_SHOW
!item [APC_SHOW (11)]         Show (fade in) application. (!nl)
                     If ap_cid is -1, all hidden applications are shown.
                     

!label APC_TOP
!item [APC_TOP (12)]          Bring application to front (the application becomes the
               active one).

!label APC_HIDENOT
!item [APC_HIDENOT(13)]Hide all applications except the one referred to by 
               ap_cid (which becomes the active application).

               If ap_cid is -1, all applications except the active one
               will be hidden.

!label APC_INFO
!item [APC_INFO(14)]         Abfragen von Applikationsparametern der An- 
                     wendung ap_cid. Wird fÅr ap_cid -1 
                     Åbergeben, so werden die Parameter der aktu-
                     ellen Anwendung geliefert.

                     FÅr ap_cout ist ein Zeiger auf einen Integer
                     zu Åbergeben. N.AES hinterlegt hier die 
                     Applikationsparameter in Form einer 
                     Bitmaske:

                     !begin_xlist  [APCI_HIDD]
                     !label APCI_HIDDEN
                     !item [APCI_HIDDEN (1)]     Bit 0 ist gesetzt, wenn 
                                        die Applikation 
                                        ausgeblendet ist.

                     !label APCI_HASMBAR
                     !item [APCI_HASMBAR (2)]    Bit 1 ist gesetzt, wenn 
                                        die Applikation eine 
                                        MenÅleiste besitzt.

                     !label APCI_HASDESK
                     !item [APCI_HASDESK (4)]    Bit 2 ist gesetzt, wenn 
                                        die Applikation einen 
                                         eigenen Desktop besitzt.
                    !end_xlist
!label APC_MENU
!item [APC_MENU(15)]         Liefert die Adresse des MenÅbaums, den die 
                     Anwendung ap_cid zuletzt angemeldet hat. 
                     Hierzu ist fÅr ap_cout ein Zeiger auf einen 
                     OBJECT-Zeiger zu Åbergeben; letzterer wird 
                     vom N.AES mit der gesuchten MenÅbaumadresse 
                     gefÅllt.

                     Wird fÅr ap_cid -1 Åbergeben, so wird die 
                     MenÅbaumadresse der aktuellen Anwendung 
                     geliefert. öbergibt man fÅr ap_cid den Wert 
                     0, so wird die Adresse des vom (!nolink [N.AES]) intern 
                     verwalteten SystemmenÅs geliefert. Dies ist 
                     die MenÅbox, die aufklappt, wenn man den am 
                     weitesten links stehenden MenÅtitel anwÑhlt 
                     und welche die Liste aller beim N.AES 
                     angemeldeten Anwendungen und Accessories 
                     enthÑlt.

                     Hat die abgefragte Anwendung keine 
                     MenÅleiste angemeldet oder existiert keine 
                     Anwendung mit der Identifikation ap_cid, so 
                     wird ein Nullzeiger nach ap_cout 
                     geschrieben.

                     Der RÅckgabewert von appl_control, Modus 
                                    APC_MENU ist immer der Wert 1.

                                    Hinweis:
                                    Wenn man diesen Modus verwendet, sollte man 
                                    sich ganz sicher sein, was man tut! Das 
                                    VerÑndern des gelieferten MenÅbaums kann zu 
                                    undefinierten SystemzustÑnden fÅhren. Bei 
                                    aktivem MiNT-Speicherschutz kann bereits ein
                                    Lesezugriff auf den MenÅbaum den Abbruch der
                                    Anwendung bewirken.

!label APC_WIDGETS
!item [APC_WIDGETS (16)]      Erfragt oder setzt die 'default' Positionen 
                                    der Fensterobjekte. (!I)ap_cout(!i) ist ein Zeiger 
!label MINWINOBJ
                                    auf einen MINWINOBJ(12) groûen (int16_t) 
                                    Buffer, der zum abfragen der 
                                    Objektreihenfolge komplett mit -1 gefÅllt 
                                    sein muû. Das letzte Word muû eine 0 sein. 
                                    Wird eine Fehlermeldung zurÅckgeliefert 
                                    reicht der Buffer nicht fÅr alle Objekte und
                                    sollte vergrîûert werden. Im Buffer liegen 
                                    als erstes die Objekte der Titelleiste von 
                                    links nach rechts, danach die Objekte des 
                                    Vertikalsliders von oben nach unten und dann
                                    die Objekte des Horizontalsliders von links 
                                    nach rechts. Abgeschlossen wird die Liste 
                                    mit einem 0 Word. Zum setzen der Positionen 
                                    mÅûen die ersten Objekte vom Typ topwidgets 
                                    sein (von links nach rechts), danach die 
                                    Objekte des Typs rightwidgets (von oben nach 
                                    unten) und dann die Objekte des Typs 
                                    bottomwidgets (von links nach rechts). 
                                    Sollten Objekte doppelt oder falsch gesetzt 
                                    sein wird ein Fehler gemeldet.
!end_xlist

!item [ap_cout]         Is filled by the AES dependent on (!I)ap_cwhat(!i)
              und hat nur fÅr 
              APC_INFO, APC_MENU und APC_WIDGETS eine Bedeutung. In den anderen 
              FÑllen wird dieser Parameter ignoriert, die öbergabe eines 
              Nullzeigers ist dann mîglich.

!end_xlist

(!B)Note:(!b)
     Hidden application have a '*' placed in front of their names in 
     the applications menu, unless they did not have a window open 
     during hiding. If the latter is the case only the active 
     application is changed.

     So the '*' in front of the name means: One ore more windows of 
     this application are hidden.

!item [(!nolink [Return]) Value:]
~0 = ein Fehler ist aufgetreten (!nl)
>0 = kein Fehler aufgetreten

!item [Availability:]
Das Vorhandensein der Funktion ist Åber (!link [appl_getinfo][%apgi_65]) (Opcode 65)
nachprÅfbar.

!item [Group:]
Application Library

!item [See Also:]
(!link [Binding] [Bindings for appl_control]) ~ SM_M_SPECIAL
(!ende_liste)



!begin_node Bindings for appl_control
!ignore_index
(!begin_liste) [GEM-Arrays]
!item [C:]
int16_t appl_control ( int16_t ap_cid, int16_t ap_cwhat, void *ap_cout);

!item [Binding:]
!begin_verbatim
int16_t appl_control ( int16_t ap_cid, int16_t ap_cwhat,
                       void *ap_cout);
{
   int_in[0]  = ap_cid;
   int_in[1]  = ap_cwhat;
   addr_in[0] = ap_cout;
       
   return ( crys_if(129) ); 
}
!end_verbatim
!item [GEM-Arrays:]
!begin_table [l l l]
Adresse !! Feldelement !! Belegung
!hline
control   !! control[0] !! 129   # Function Opcode
control+2 !! control[1] !! 2     # entry in int_in
control+4 !! control[2] !! 1     # entry in int_out
control+6 !! control[3] !! 1     # entry in addr_in
control+8 !! control[4] !! 0     # entry in addr_out
int_in !! int_in[0] !! ap_cid
int_in+2 !! int_in[1] !! ap_cwhat
addr_in  !! addr_in[0] !! ap_cout
int_out !! int_out[0] !! ap_creturn
!end_table
(!ende_liste)
!end_node
!end_node

!else

!begin_node appl_control
(!begin_liste) [Beschreibung]
!item [Name:]
Gezieltes Steuern von Anwendungen.
!item [AES-Nummer:]
129
!item [Deklaration:]
int16_t appl_control ( int16_t ap_cid, int16_t ap_cwhat, void *ap_cout);

!item [Beschreibung:]
Die Funktion erlaubt ein gezieltes Steurern von Anwendungen.
!begin_xlist [Parameter]
!item [Parameter]
Bedeutung

!item [ap_cid]
Die Applikationsidentifikation (apid) der Anwendung, die gesteuert
werden soll.

!item [ap_cwhat]
Die Art der Steuerung:

!begin_xlist [APC_WIDGETS ]

!item [0 bis 9]              reserviert fÅr N.AES

!label APC_HIDE
!item [APC_HIDE (10)]         Applikation ausblenden (!nl)
                     Wird fÅr ap_cid -1 Åbergeben, so wird die 
                     aktuelle Anwendung ausgeblendet.

!label APC_SHOW
!item [APC_SHOW (11)]         Applikation einblenden (!nl)
                     Wird fÅr ap_cid -1 Åbergeben, so werden alle
                     ausgeblendeten Anwendungen eingeblendet.

!label APC_TOP
!item [APC_TOP (12)]          Applikation in den Vordergrund bringen (zur 
                     aktuellen Anwendung machen).

!label APC_HIDENOT
!item [APC_HIDENOT(13)]      Ausblenden aller Anwendungen bis auf die in 
                     ap_cid angegebene, welche zur neuen aktu- 
                     ellen Anwendung wird.
                     Wird fÅr ap_cid -1 Åbergeben, so werden alle
                     Anwendungen bis auf die aktuelle 
                     ausgeblendet.

!label APC_INFO
!item [APC_INFO(14)]         Abfragen von Applikationsparametern der An- 
                     wendung ap_cid. Wird fÅr ap_cid -1 
                     Åbergeben, so werden die Parameter der aktu-
                     ellen Anwendung geliefert.

                     FÅr ap_cout ist ein Zeiger auf einen Integer
                     zu Åbergeben. N.AES hinterlegt hier die 
                     Applikationsparameter in Form einer 
                     Bitmaske:

                     !begin_xlist  [APCI_HIDD]
                     !label APCI_HIDDEN
                     !item [APCI_HIDDEN (1)]     Bit 0 ist gesetzt, wenn 
                                        die Applikation 
                                        ausgeblendet ist.

                     !label APCI_HASMBAR
                     !item [APCI_HASMBAR (2)]    Bit 1 ist gesetzt, wenn 
                                        die Applikation eine 
                                        MenÅleiste besitzt.

                     !label APCI_HASDESK
                     !item [APCI_HASDESK (4)]    Bit 2 ist gesetzt, wenn 
                                        die Applikation einen 
                                         eigenen Desktop besitzt.
                    !end_xlist
!label APC_MENU
!item [APC_MENU(15)]         Liefert die Adresse des MenÅbaums, den die 
                     Anwendung ap_cid zuletzt angemeldet hat. 
                     Hierzu ist fÅr ap_cout ein Zeiger auf einen 
                     OBJECT-Zeiger zu Åbergeben; letzterer wird 
                     vom N.AES mit der gesuchten MenÅbaumadresse 
                     gefÅllt.

                     Wird fÅr ap_cid -1 Åbergeben, so wird die 
                     MenÅbaumadresse der aktuellen Anwendung 
                     geliefert. öbergibt man fÅr ap_cid den Wert 
                     0, so wird die Adresse des vom (!nolink [N.AES]) intern 
                     verwalteten SystemmenÅs geliefert. Dies ist 
                     die MenÅbox, die aufklappt, wenn man den am 
                     weitesten links stehenden MenÅtitel anwÑhlt 
                     und welche die Liste aller beim N.AES 
                     angemeldeten Anwendungen und Accessories 
                     enthÑlt.

                     Hat die abgefragte Anwendung keine 
                     MenÅleiste angemeldet oder existiert keine 
                     Anwendung mit der Identifikation ap_cid, so 
                     wird ein Nullzeiger nach ap_cout 
                     geschrieben.

                     Der RÅckgabewert von appl_control, Modus 
                                    APC_MENU ist immer der Wert 1.

                                    Hinweis:
                                    Wenn man diesen Modus verwendet, sollte man 
                                    sich ganz sicher sein, was man tut! Das 
                                    VerÑndern des gelieferten MenÅbaums kann zu 
                                    undefinierten SystemzustÑnden fÅhren. Bei 
                                    aktivem MiNT-Speicherschutz kann bereits ein
                                    Lesezugriff auf den MenÅbaum den Abbruch der
                                    Anwendung bewirken.

!label APC_WIDGETS
!item [APC_WIDGETS (16)]      Erfragt oder setzt die 'default' Positionen 
                                    der Fensterobjekte. (!I)ap_cout(!i) ist ein Zeiger 
!label MINWINOBJ
                                    auf einen MINWINOBJ(12) groûen (int16_t) 
                                    Buffer, der zum abfragen der 
                                    Objektreihenfolge komplett mit -1 gefÅllt 
                                    sein muû. Das letzte Word muû eine 0 sein. 
                                    Wird eine Fehlermeldung zurÅckgeliefert 
                                    reicht der Buffer nicht fÅr alle Objekte und
                                    sollte vergrîûert werden. Im Buffer liegen 
                                    als erstes die Objekte der Titelleiste von 
                                    links nach rechts, danach die Objekte des 
                                    Vertikalsliders von oben nach unten und dann
                                    die Objekte des Horizontalsliders von links 
                                    nach rechts. Abgeschlossen wird die Liste 
                                    mit einem 0 Word. Zum setzen der Positionen 
                                    mÅûen die ersten Objekte vom Typ topwidgets 
                                    sein (von links nach rechts), danach die 
                                    Objekte des Typs rightwidgets (von oben nach 
                                    unten) und dann die Objekte des Typs 
                                    bottomwidgets (von links nach rechts). 
                                    Sollten Objekte doppelt oder falsch gesetzt 
                                    sein wird ein Fehler gemeldet.
!end_xlist

!item [ap_cout]     Wird abhÑngig von (!I)ap_cwhat(!i) gefÅllt oder gelesen und hat nur fÅr 
              APC_INFO, APC_MENU und APC_WIDGETS eine Bedeutung. In den anderen 
              FÑllen wird dieser Parameter ignoriert, die öbergabe eines 
              Nullzeigers ist dann mîglich.

!end_xlist

(!B)Hinweis:(!b)
Ausgeblendeten Anwendungen wird in der MenÅleiste ein '*' vorangestellt, es sei 
denn, sie hatten im Moment der Ausblendung kein Fenster offen. In diesem Fall 
wird nur die Anwendung gewechselt.

Der '*' vor dem Namen bedeutet genau: Einige oder alle geîffneten Fenster dieser
Anwendung sind ausgeblendet.

!item [Ergebnis:]
~0 = ein Fehler ist aufgetreten (!nl)
>0 = kein Fehler aufgetreten

!item [VerfÅgbar:]
Das Vorhandensein der Funktion ist Åber (!link [appl_getinfo][%apgi_65]) (Opcode 65)
nachprÅfbar.

!item [Gruppe:]
(!link [Applikationen][Applikationsfunktionen])

!item [Querverweis:]
(!link [Binding] [Bindings fÅr appl_control]) ~ SM_M_SPECIAL
(!ende_liste)



!begin_node Bindings fÅr appl_control
!ignore_index
(!begin_liste) [GEM-Arrays]
!item [C:]
int16_t appl_control ( int16_t ap_cid, int16_t ap_cwhat, void *ap_cout);

!item [Umsetzung:]
!begin_verbatim
int16_t appl_control ( int16_t ap_cid, int16_t ap_cwhat,
                       void *ap_cout);
{
   int_in[0]  = ap_cid;
   int_in[1]  = ap_cwhat;
   addr_in[0] = ap_cout;
       
   return ( crys_if(129) ); 
}
!end_verbatim
!item [GEM-Arrays:]
!begin_table [l l l]
Adresse !! Feldelement !! Belegung
!hline
control   !! control[0] !! 129   # Opcode der Funktion
control+2 !! control[1] !! 2     # EintrÑge in int_in
control+4 !! control[2] !! 1     # EintrÑge in int_out
control+6 !! control[3] !! 1     # EintrÑge in addr_in
control+8 !! control[4] !! 0     # EintrÑge in addr_out
int_in !! int_in[0] !! ap_cid
int_in+2 !! int_in[1] !! ap_cwhat
addr_in  !! addr_in[0] !! ap_cout
int_out !! int_out[0] !! ap_creturn
!end_table
(!ende_liste)
!end_node
!end_node

!endif
